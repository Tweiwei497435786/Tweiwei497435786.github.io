<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Enjoying my work!Enjoying my life!">
<meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://www.tortoise.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="Enjoying my work!Enjoying my life!">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
<meta name="twitter:description" content="Enjoying my work!Enjoying my life!">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="https://raw.githubusercontent.com/Tweiwei497435786/HexoResource/master/assets/avatar.png" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Tortoise</a></h1>
		</hgroup>

		
		<p class="header-subtitle">Enjoying my work!Enjoying my life!</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>Menu</li>
						<li>Tags</li>
						
						<li>Links</li>
						
						
						<li>Über</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">Home</a></li>
				        
							<li><a href="/archives">Archives</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/Tweiwei497435786" title="github">github</a>
					        
								<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/han-mo-xiang-ning" title="zhihu">zhihu</a>
					        
								<a class="linkedin" target="_blank" href="http://www.cocoachina.com/bbs/u.php?tid=211552" title="linkedin">linkedin</a>
					        
						</div>					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Swift学习/" style="font-size: 10px;">Swift学习</a> <a href="/tags/iOS开发/" style="font-size: 20px;">iOS开发</a> <a href="/tags/iOS技术/" style="font-size: 10px;">iOS技术</a> <a href="/tags/工具/" style="font-size: 16.67px;">工具</a> <a href="/tags/开发技巧/" style="font-size: 10px;">开发技巧</a> <a href="/tags/房屋装修/" style="font-size: 13.33px;">房屋装修</a> <a href="/tags/旅行计划/" style="font-size: 16.67px;">旅行计划</a> <a href="/tags/读书屋/" style="font-size: 10px;">读书屋</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://objccn.io">Objc中国</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://blog.devtang.com">唐巧的技术博客</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://bluereader.org/rss/25188">Casa Taloyum</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">我是谁，我从哪里来，我到哪里去？我就是我，追求自由与极致…</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Tortoise</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="https://raw.githubusercontent.com/Tweiwei497435786/HexoResource/master/assets/avatar.png" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">Tortoise</h1>
			</hgroup>
			
			<p class="header-subtitle">Enjoying my work!Enjoying my life!</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">Home</a></li>
		        
					<li><a href="/archives">Archives</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/Tweiwei497435786" title="github">github</a>
			        
						<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/han-mo-xiang-ning" title="zhihu">zhihu</a>
			        
						<a class="linkedin" target="_blank" href="http://www.cocoachina.com/bbs/u.php?tid=211552" title="linkedin">linkedin</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
  
    <article id="post-Swift基础学习" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/08/29/Swift基础学习/" class="article-date">
  	<time datetime="2016-08-29T06:46:41.000Z" itemprop="datePublished">2016-08-29</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/29/Swift基础学习/">Swift基础学习</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p>1.<a href="http://learnswift.tips" target="_blank" rel="external">learnswift网站</a></p>
<p>2.<a href="http://letsswift.com" target="_blank" rel="external">swift中文学习网站</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Swift学习/">Swift学习</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-iOS中RunLoop" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/08/07/iOS中RunLoop/" class="article-date">
  	<time datetime="2016-08-07T07:40:26.000Z" itemprop="datePublished">2016-08-07</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/07/iOS中RunLoop/">iOS中RunLoop</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="初识iOS-RunLoop"><a href="#初识iOS-RunLoop" class="headerlink" title="初识iOS RunLoop"></a>初识iOS RunLoop</h4><p>iOS中应用程序app从开始运行一直处于等待的状态，接收到类似点击事件交互后执行相应的操作，完成后继续等待状态，直到我们将程序杀死。那么这个过程是怎么发生的呢？是如何通过相应的方式实现这种机制的呢？通过下面的代码探析：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- (void)loop &#123;</span><br><span class="line">   BOOL message;</span><br><span class="line">	do &#123;</span><br><span class="line">		message = [self getMessage];</span><br><span class="line">		[self processMessage];</span><br><span class="line">	&#125; while (!message)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如上面的代码就可以达到这种机制。可以推测而出app从启动开始创建的主线程一定是在一个死循环中，没有任务的时候进行休眠，接收到任务后被激活执行任务。我们可以理解，这样一个管理线程执行任务就是RunLoop机制，线程在执行中的休眠与激活就是RunLoop对象进行管理的。</p>
<h4 id="RunLoop与线程"><a href="#RunLoop与线程" class="headerlink" title="RunLoop与线程"></a>RunLoop与线程</h4><p>RunLoop既然是用来管理线程的，那么他们直接有着怎样的关系。实际上，每一个线程中都有一个RunLoop对象，可以通过具体的方法获得。需要注意的是，除了主线程中RunLoop是默认创建并运行激活的，但并不是每一个线程中都有这个实例对象，如果我们不主动获取runloop，这个runloop就不存在，如果我们去获取不存在就去创建并返回。可以通过[NSRunLoop  currentRunLoop]方法获取当前线程的runloop。</p>
<h4 id="Cocoa中RunLoop"><a href="#Cocoa中RunLoop" class="headerlink" title="Cocoa中RunLoop"></a>Cocoa中RunLoop</h4><h5 id="NSRunLoop是Cocoa框架中runloop的类非线程安全-关于NSRunLoop的方法如下："><a href="#NSRunLoop是Cocoa框架中runloop的类非线程安全-关于NSRunLoop的方法如下：" class="headerlink" title="NSRunLoop是Cocoa框架中runloop的类非线程安全,关于NSRunLoop的方法如下："></a>NSRunLoop是Cocoa框架中runloop的类非线程安全,关于NSRunLoop的方法如下：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">+ (NSRunLoop *)currentRunLoop;//获取当前线程的runloop，没有则创建并返回</span><br><span class="line">+ (NSRunLoop *)mainRunLoop NS_AVAILABLE(10_5, 2_0)//获取当前主线程的runloop</span><br><span class="line"></span><br><span class="line">- (CFRunLoopRef)getCFRunLoop；//返回CFRunLoopRef</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- (void)addTimer:(NSTimer *)timer forMode:(NSString *)mode;//将定时器添加到runloop中</span><br><span class="line"></span><br><span class="line">- (void)addPort:(NSPort *)aPort forMode:(NSString *)mode;//添加输入源端口到runloop中</span><br><span class="line">- (void)removePort:(NSPort *)aPort forMode:(NSString *)mode;//将某个输入源端口移除</span><br><span class="line"></span><br><span class="line">- (nullable NSDate *)limitDateForMode:(NSString *)mode;//获取下个响应时间</span><br><span class="line">- (void)acceptInputForMode:(NSString *)mode beforeDate:(NSDate *)limitDate;//在某个时间期限前接收响应</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- (void)run; //开始运行</span><br><span class="line">- (void)runUntilDate:(NSDate *)limitDate;//到某个时间点运行</span><br><span class="line">- (BOOL)runMode:(NSString *)mode beforeDate:(NSDate *)limitDate;//某个期限前运行</span><br></pre></td></tr></table></figure>
<p>注意上面提供的方法：输入源被注册进Runloop中时会有方法进行remove，但是定时器却没有，但是定时器中的invalidate方法可以将其从runloop中移除，正如官方文档的说明：<code>invalidate是重要也是唯一的可以将定时器从runloop的注销的方法</code>，所以如果我们创建了定时器，就一定要在不使用时调用invalidate方法。</p>
<h4 id="CoreFoundation中RunLoop"><a href="#CoreFoundation中RunLoop" class="headerlink" title="CoreFoundation中RunLoop"></a>CoreFoundation中RunLoop</h4><h5 id="CFRunLoopRef是CoreFoundation框架中runloop的类线程安全-关于CoreFoundation中关于runloop的有一下类："><a href="#CFRunLoopRef是CoreFoundation框架中runloop的类线程安全-关于CoreFoundation中关于runloop的有一下类：" class="headerlink" title="CFRunLoopRef是CoreFoundation框架中runloop的类线程安全,关于CoreFoundation中关于runloop的有一下类："></a>CFRunLoopRef是CoreFoundation框架中runloop的类线程安全,关于CoreFoundation中关于runloop的有一下类：</h5><ul>
<li>CFRunLoopRef</li>
<li>CFRunLoopModeRef</li>
<li>CFRunLoopSourceRef</li>
<li>CFRunLoopTimerRef</li>
<li>CFRunLoopObserverRef</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Tweiwei497435786/HexoResource/master/article/runloop.png" alt="Markdown preferences pane"></p>
<h5 id="CFRunLoopModeRef"><a href="#CFRunLoopModeRef" class="headerlink" title="CFRunLoopModeRef"></a>CFRunLoopModeRef</h5><p>一个 RunLoop 包含若干个 Mode，每个 Mode 又包含若干个 Source/Timer/Observer。每次调用 RunLoop 的主函数时，只能指定其中一个 Mode，这个Mode被称作 CurrentMode。如果需要切换 Mode，只能退出 Loop，再重新指定一个 Mode 进入。这样做主要是为了分隔开不同组的 Source/Timer/Observer，让其互不影响</p>
<h5 id="CFRunLoopSourceRef事件产生的地方。分为Source0-和-Source1"><a href="#CFRunLoopSourceRef事件产生的地方。分为Source0-和-Source1" class="headerlink" title="CFRunLoopSourceRef事件产生的地方。分为Source0 和 Source1"></a>CFRunLoopSourceRef事件产生的地方。分为Source0 和 Source1</h5><ul>
<li>Source0 只包含了一个回调（函数指针），它并不能主动触发事件。使用时，你需要先调用 CFRunLoopSourceSignal(source)，将这个 Source 标记为待处理，然后手动调用 CFRunLoopWakeUp(runloop) 来唤醒 RunLoop，让其处理这个事件。</li>
<li>Source1 包含了一个 mach_port 和一个回调（函数指针），被用于通过内核和其他线程相互发送消息。这种 Source 能主动唤醒 RunLoop 的线程</li>
</ul>
<h5 id="CFRunLoopTimerRef基于时间的触发器"><a href="#CFRunLoopTimerRef基于时间的触发器" class="headerlink" title="CFRunLoopTimerRef基于时间的触发器"></a>CFRunLoopTimerRef基于时间的触发器</h5><p>当其加入到 RunLoop 时，RunLoop会注册对应的时间点，当时间点到时，RunLoop会被唤醒以执行那个回调。</p>
<h5 id="CFRunLoopObserverRef"><a href="#CFRunLoopObserverRef" class="headerlink" title="CFRunLoopObserverRef"></a>CFRunLoopObserverRef</h5><p>是观察者，每个 Observer 都包含了一个回调（函数指针），当 RunLoop 的状态发生变化时，观察者就能通过回调接受到这个变化：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/* Run Loop Observer Activities */</span><br><span class="line">typedef CF_OPTIONS(CFOptionFlags, CFRunLoopActivity) &#123;</span><br><span class="line">    kCFRunLoopEntry = (1UL &lt;&lt; 0),//即将进入Loop</span><br><span class="line">    kCFRunLoopBeforeTimers = (1UL &lt;&lt; 1),//即将处理 Timer</span><br><span class="line">    kCFRunLoopBeforeSources = (1UL &lt;&lt; 2),//即将处理 Source</span><br><span class="line">    kCFRunLoopBeforeWaiting = (1UL &lt;&lt; 5),// 即将进入休眠</span><br><span class="line">    kCFRunLoopAfterWaiting = (1UL &lt;&lt; 6),// 刚从休眠中唤醒</span><br><span class="line">    kCFRunLoopExit = (1UL &lt;&lt; 7),// 即将退出Loop</span><br><span class="line">    kCFRunLoopAllActivities = 0x0FFFFFFFU</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h5 id="CFRunLoopModeRef-1"><a href="#CFRunLoopModeRef-1" class="headerlink" title="CFRunLoopModeRef"></a>CFRunLoopModeRef</h5><p>苹果公开提供的 Mode 有两个：kCFRunLoopDefaultMode (NSDefaultRunLoopMode)默认情况 和 UITrackingRunLoopMode追踪 ScrollView 滑动时的状态，你可以用这两个 Mode Name 来操作其对应的 Mode。</p>
<p>同时苹果还提供了一个操作 Common 标记的字符串：kCFRunLoopCommonModes (NSRunLoopCommonModes)，你可以用这个字符串来操作 Common Item。需要注意的是一个 Mode 可以将自己标记为”Common”属性（通过将其 ModeName 添加到 RunLoop 的 “commonModes” 中）。每当 RunLoop 的内容发生变化时，RunLoop 都会自动将 _commonModeItems 里的 Source/Observer/Timer 同步到具有 “Common” 标记的所有Mode里。<br>关于Mode更多点击<a href="http://iphonedevwiki.net/index.php/CFRunLoop" target="_blank" rel="external">这里</a></p>
<h4 id="RunLoop-的内部逻辑"><a href="#RunLoop-的内部逻辑" class="headerlink" title="RunLoop 的内部逻辑"></a>RunLoop 的内部逻辑</h4><p>具体的流程如下图：</p>
<p><img src="https://raw.githubusercontent.com/Tweiwei497435786/HexoResource/master/article/runloopliucheng.png" alt="Markdown preferences pane"></p>
<p>关于其中的逻辑讲解见参考博文中内容。</p>
<h4 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h4><p>1.<a href="http://v.youku.com/v_show/id_XODgxODkzODI0.html?beta&amp;" target="_blank" rel="external">iOS线下分享《RunLoop》</a></p>
<p>2.<a href="http://my.oschina.net/u/2340880/blog/491966" target="_blank" rel="external">iOS中RunLoop机制浅探</a></p>
<p>3.<a href="http://www.cocoachina.com/ios/20150601/11970.html" target="_blank" rel="external">深入理解RunLoop</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS开发/">iOS开发</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-渔山列岛露营" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/07/31/渔山列岛露营/" class="article-date">
  	<time datetime="2016-07-31T06:51:07.000Z" itemprop="datePublished">2016-07-31</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/07/31/渔山列岛露营/">渔山列岛露营</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<h3 id="出行概要"><a href="#出行概要" class="headerlink" title="出行概要"></a>出行概要</h3></blockquote>
<p>活动时间：2016.8.19–2016.8.21</p>
<p>活动目的：露营，看海</p>
<p>出发时间：2016.8.19</p>
<p>回程时间：2016.8.21</p>
<p>活动强度：一般</p>
<p>活动费用：含路费计划900以内</p>
<p>联系人：Tweiwei497435786[微信]</p>
<blockquote>
<h3 id="地图"><a href="#地图" class="headerlink" title="地图"></a>地图</h3></blockquote>
<p><img src="https://raw.githubusercontent.com/Tweiwei497435786/HexoResource/master/travel/yurenliedao_location.png" alt="Markdown preferences pane"></p>
<blockquote>
<h3 id="路线"><a href="#路线" class="headerlink" title="路线"></a>路线</h3></blockquote>
<h4 id="Day1-杭州-宁波-象山"><a href="#Day1-杭州-宁波-象山" class="headerlink" title="Day1 杭州 - 宁波 - 象山"></a>Day1 杭州 - 宁波 - 象山</h4><p><code>8.19 周五</code>17:24（杭州火车东站）集合乘坐G589高铁到宁波，行程1小时，预计6：30到宁波，乘坐宁波到象山汽车。</p>
<p><img src="https://raw.githubusercontent.com/Tweiwei497435786/HexoResource/master/travel/hangzhoudaoninbonew.png" alt="Markdown preferences pane"></p>
<p>杭州天气：</p>
<p>宁波天气：</p>
<p>说明：</p>
<p> (1) <a href="http://trains.ctrip.com/TrainBooking/Search.aspx?=&amp;day=2&amp;fromCn=%BA%BC%D6%DD&amp;toCn=%C4%FE%B2%A8&amp;mkt_header=bdkx&amp;allianceID=106225&amp;sid=550027&amp;from=hangzhou&amp;to=ningbo" target="_blank" rel="external">杭州宁波高铁班次</a></p>
<p> (2) <a href="http://bus.ctrip.com/buslist.html?allianceid=30613&amp;sid=555538&amp;ouid=000401app-&amp;utm_medium=onebox&amp;utm_campaign=bus&amp;utm_source=baidu_pc&amp;&amp;isctrip=&amp;from=宁波&amp;to=象山&amp;ctm_ref=baidu_pc" target="_blank" rel="external">宁波到象山的汽车时间表</a></p>
<h4 id="Day2-象山-石浦-渔山列岛"><a href="#Day2-象山-石浦-渔山列岛" class="headerlink" title="Day2 象山 - 石浦 - 渔山列岛"></a>Day2 象山 - 石浦 - 渔山列岛</h4><p><code>9.20 周六</code>6:00起床，乘车大巴从宁波到石浦（6:30汽车南站），一个半小时到达，预计6：30左右到达，乘坐6：50左右前往渔山列岛的班船，行程2：30小时，预计10：00登岛。</p>
<p>宁波天气：</p>
<p>说明：中餐在岛上酒店吃饭，晚餐干粮备足，晚上海边露营。特别需要注意的是’班船出行时间’</p>
<h4 id="Day3-渔山列岛－象山石浦-宁波-杭州"><a href="#Day3-渔山列岛－象山石浦-宁波-杭州" class="headerlink" title="Day3 渔山列岛－象山石浦 - 宁波 - 杭州"></a>Day3 渔山列岛－象山石浦 - 宁波 - 杭州</h4><p><code>9：30 周五</code>睡到自然醒，选择上午9:00左右乘船回象山石浦，或者下午2:00左右回石浦到宁波，乘坐高铁回杭州。</p>
<p>宁波天气：</p>
<p>杭州天气：</p>
<p>说明</p>
<blockquote>
<h3 id="预计费用"><a href="#预计费用" class="headerlink" title="预计费用"></a>预计费用</h3></blockquote>
<table>
<thead>
<tr>
<th style="text-align:center">名称</th>
<th style="text-align:center">费用</th>
<th style="text-align:center">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">住宿</td>
<td style="text-align:center">1 * 80 = 100</td>
<td style="text-align:center">自带帐篷+宾馆，住宿两天</td>
</tr>
<tr>
<td style="text-align:center">餐费</td>
<td style="text-align:center">6 * 50 ＝ 300</td>
<td style="text-align:center">餐费包含水零食等</td>
</tr>
<tr>
<td style="text-align:center">车费</td>
<td style="text-align:center">71 <em> 2 + 41.5 </em> 2+300 = 500</td>
<td style="text-align:center">高铁 大巴 船票</td>
</tr>
<tr>
<td style="text-align:center">其它费用</td>
<td style="text-align:center">未知</td>
<td style="text-align:center">包含个人消费等</td>
</tr>
<tr>
<td style="text-align:center">总计</td>
<td style="text-align:center">900</td>
<td style="text-align:center">当前费用为大概统计，具体依据消费而定</td>
</tr>
</tbody>
</table>
<blockquote>
<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3></blockquote>
<p>1.关于行程中的景点，天气会在出行之前不断完善，期望大家多出主意，可以尽快联系我。</p>
<p>2.期望大家能够在出游之前提出更多的建议，将会根据相关建议做出修改。让大家都能有一个开心，快乐美好的骑行游玩旅程。</p>
<p>3.本次出行采取露营方式，需要自备帐篷。</p>
<blockquote>
<h3 id="免责声明"><a href="#免责声明" class="headerlink" title="免责声明"></a>免责声明</h3></blockquote>
<p>1.本活动是自发的，有一定的危险性，参加者须对自己的安全负责。活动中当由于意外事故或急性疾病等不可预测因素造成身体损伤时，团队的其他成员会尽全力救助，但不承担任何法律和经济责任，望能理解。</p>
<p>2.任何参与本活动的人均视为同意此免责声明。</p>
<blockquote>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3></blockquote>
<p>1.<a href="https://item.taobao.com/item.htm?spm=a230r.1.14.29.PAJ6Qb&amp;id=44074721363&amp;ns=1&amp;abbucket=11#detail" target="_blank" rel="external">淘宝渔山列岛船票预定</a></p>
<p>2.<a href="http://blog.sina.com.cn/s/blog_b6f88dee0101ajr6.html" target="_blank" rel="external">宁波渔山岛</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/旅行计划/">旅行计划</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Mac-Tree命令" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/28/Mac-Tree命令/" class="article-date">
  	<time datetime="2016-06-28T01:46:48.000Z" itemprop="datePublished">2016-06-28</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/28/Mac-Tree命令/">Mac Tree命令</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>tree是一个能列出递归目录的命令，以图形显示驱动器或路径的文件夹结构，可以生成命令树。在linux和Windows下都有类似tree的命令来查看当前目录树结构的软件，mac上面却没有。当然办法总是会有的，下面几种教你几种方法安装方法。</p>
<h4 id="alias"><a href="#alias" class="headerlink" title="alias"></a>alias</h4><p>通过alias指定别名方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alias tree=&quot;find . -print | sed -e &apos;s;[^/]*/;|____;g;s;____|; |;g&apos;&quot;</span><br></pre></td></tr></table></figure>
<p>打开bash文件,vim ~/.bash_profile，把上面命令拷贝进去就可以了。让然如果你安装了zsh的话，那就vim ~/.zshrc，把命令拷贝进去。但是这个命令只能在terminate中输入tree命令，无法做其它的扩展操作。</p>
<h4 id="手动安装"><a href="#手动安装" class="headerlink" title="手动安装"></a>手动安装</h4><p>在<a href="http://mama.indstate.edu/users/ice/tree/" target="_blank" rel="external">tree</a>下载文件，然后解压缩文件，打开文件中的makefile文件来匹配我们的环境osx，找到 # Uncomment for OS X:然后将下面的内容注释解开：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># Uncomment for OS X:</span><br><span class="line">CC=cc</span><br><span class="line">CFLAGS=-O2 -Wall -fomit-frame-pointer -no-cpp-precomp</span><br><span class="line">LDFLAGS=</span><br><span class="line">MANDIR=/usr/share/man/man1</span><br><span class="line">OBJS+=strverscmp.o</span><br></pre></td></tr></table></figure>
<p>表示在osx下使用，然后编译文件，并且将编译成功的文件放到系统的bin下面：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">make  //编译</span><br><span class="line">sudo cp tree /usr/local/bin/  //拷贝到bin下面</span><br></pre></td></tr></table></figure>
<p>重启terminate，执行tree命令。此方法较为复杂，需要手动编译bin文件。</p>
<h4 id="homebrew安装"><a href="#homebrew安装" class="headerlink" title="homebrew安装"></a>homebrew安装</h4><p>我们可以通过brew search tree发现存在tree工具，当然前提是你需要安装homebrew，关于怎么安装请看之前的文章。在termiate中输入：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install tree</span><br></pre></td></tr></table></figure>
<p>安装即可，此方式最为简单，不过需要安装brew。</p>
<h4 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h4><p>1.<a href="http://www.qiansw.com/mac-os-x-install-tree-command.html" target="_blank" rel="external">MAC OS X安装命令行工具TREE</a></p>
<p>2.<a href="http://www.7edown.com/edu/article/soft_48663_1.html" target="_blank" rel="external">mac系统中使用tree 命令展示目录树结构</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/工具/">工具</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Unix常用命令" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/27/Unix常用命令/" class="article-date">
  	<time datetime="2016-06-27T12:52:31.000Z" itemprop="datePublished">2016-06-27</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/27/Unix常用命令/">Unix常用命令</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在Mac的使用过程中，为了灵活的操作，开发人员经常需要使用命令方式进行操作，以下列举了一些经常使用的命令：</p>
<h4 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h4><p>1.删除当前文件夹及文件夹下所有的东西</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rm -rf [source] </span><br><span class="line">eg:rm -rf xq_commonview //已经处于当前同级目录，如果不是则要写完整的路径</span><br></pre></td></tr></table></figure>
<p>2.删除当前文件夹下的所有的文件（不包含文件夹）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rm [source]/* </span><br><span class="line">eg:rm xq_commonview/* //已经处于当前同级目录，如果不是则要写完整的路径</span><br></pre></td></tr></table></figure>
<p>3.删除当前文件夹下的所有的文件（包含文件夹）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rm -rf [source]/* </span><br><span class="line">eg:rm -rf xq_commonview/* //已经处于当前同级目录，如果不是则要写完整的路径</span><br></pre></td></tr></table></figure>
<p>4.复制某文件夹下的所有内容到另外文件夹下（包含文件夹）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp -r [source]/* [targetSource]</span><br><span class="line">eg:cp -r XQCommonView/* XQ_CommonView //已经处于当前同级目录，如果不是则要写完整的路径</span><br></pre></td></tr></table></figure>
<p>5.复制某文件夹下的所有内容到另外文件夹下（不包含文件夹）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp [source]/* [targetSource]</span><br><span class="line">eg:cp XQCommonView/* XQ_CommonView //已经处于当前同级目录，如果不是则要写完整的路径</span><br></pre></td></tr></table></figure>
<p>6.在当前目录下面创建文件夹命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir [name] </span><br><span class="line">eg: mkdir hexo //在当前文件夹下创建了一个hexo文件夹</span><br></pre></td></tr></table></figure>
<p>7.在mac下面使用open命令快速打开文件或者软件，或者使用特定的软件打开特定的文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">open [fileName][appName]</span><br><span class="line">open -a [appName] [fileName]</span><br><span class="line">eg: open /Applications/kugou.app //&quot;注意注意open之后需要空格再输入斜杠 / &quot;</span><br><span class="line">eg: open -a MacDown.app 查缺补漏.md //在当前目录下面使用MacDown.app 打开macdown文件</span><br></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/工具/">工具</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-使用Cocoapods创建私有podspec" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/27/使用Cocoapods创建私有podspec/" class="article-date">
  	<time datetime="2016-06-27T12:16:23.000Z" itemprop="datePublished">2016-06-27</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/27/使用Cocoapods创建私有podspec/">使用Cocoapods创建私有podspec</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="Spec-Repo"><a href="#Spec-Repo" class="headerlink" title="Spec Repo"></a>Spec Repo</h3><p>什么是Spec Repo?其实它只是pods的一个索引，也就是一个容器，所有公开的pods都在这个里面,<code>https://github.com/CocoaPods/Specs.git</code>它实际是一个Git残酷remote端口，当你使用了Cocoapods后它会被默认的clone到本地<code>~/.cocoapods/repos</code>下的master文件夹下，这个就是官方的Spec Repo。注意在安装Cocoapods的时候，可能会在安装官方的Spec Repo文件会失败，但是并不会影响pod的使用，并且不会提示任何错误，但是在执行pod install或者search等命令会提示失败，这个会自动重新请求clone官方Spec Repo到本地。会出现如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Setting up CocoaPods master repo</span><br></pre></td></tr></table></figure>
<p>这个过程时间会比较长。其文件结构如下,每个库都应的都有多个version，每个version下面有tag对应的.podspec文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">          CocoaPods-version.yml      ......        </span><br><span class="line">master -- Specs---------------------3DTouchHelper--VersionName---3DTouchHelper.podspec</span><br><span class="line">          README.md					 ......</span><br></pre></td></tr></table></figure>
<h3 id="CocoaPods"><a href="#CocoaPods" class="headerlink" title="CocoaPods"></a>CocoaPods</h3><p>iOS 最新版 CocoaPods 的安装流程</p>
<p>1.移除现有Ruby默认源</p>
<p>$gem sources –remove <a href="https://rubygems.org/" target="_blank" rel="external">https://rubygems.org/</a></p>
<p>2.使用新的源</p>
<p>$gem sources -a <a href="https://ruby.taobao.org/" target="_blank" rel="external">https://ruby.taobao.org/</a></p>
<p>3.验证新源是否替换成功</p>
<p>$gem sources -l</p>
<p>4.安装CocoaPods</p>
<p>(1) $sudo gem install cocoapods</p>
<p> 备注：苹果系统升级 OS X EL Capitan 后改为 $sudo gem install -n /usr/local/bin cocoapods</p>
<p>(2) $pod setup</p>
<p>5.更新gem</p>
<p>$sudo gem update –system</p>
<ol>
<li>新建工程，并在终端用cd指令到文件夹内</li>
</ol>
<p>$pod search 第三方</p>
<h4 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h4><p>错误1：</p>
<p>Error fetching <a href="http://ruby.taobao.org/" target="_blank" rel="external">http://ruby.taobao.org/</a>:</p>
<p>bad response Not Found 404 (<a href="http://ruby.taobao.org/specs.4.8.gz" target="_blank" rel="external">http://ruby.taobao.org/specs.4.8.gz</a>)</p>
<p>解决方案：把安装流程中 $gem sources -a <a href="http://ruby.taobao.org/" target="_blank" rel="external">http://ruby.taobao.org/</a>   —改为—-&gt; $gem sources -a <a href="https://ruby.taobao.org/" target="_blank" rel="external">https://ruby.taobao.org/</a></p>
<p>错误2：</p>
<p>ERROR:  While executing gem … (Errno::EPERM)</p>
<p>Operation not permitted - /usr/bin/pod</p>
<p>解决方案：苹果系统升级OS X EL Capitan后会出现的插件错误，将安装流程 4.安装CocoaPods 的 (1)sudo gem install cocoapods ——&gt;改为sudo gem install -n /usr/local/bin cocoapods</p>
<p>错误3：</p>
<p>[!] Unable to satisfy the following requirements: - <code>AVOSCloud (~&gt; 3.1.6.3)</code> required by <code>Podfile</code></p>
<p>Specs satisfying the <code>AVOSCloud (~&gt; 3.1.6.3)</code> dependency were found, but they required a higher minimum deployment target.</p>
<p>解决方案：安装流程：Podfile文件 中   platform:ios, ‘6.0’  后边的 6.0 是平台版本号 ，一定要加上</p>
<h3 id="创建podfile"><a href="#创建podfile" class="headerlink" title="创建podfile"></a>创建podfile</h3><p>使用终端进入项目所在的目录，输入touch podfile命令，会看到该目录下面创建了一个podfile文件，修改podfile文件添加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">platform:ios, &apos;7.0&apos;</span><br><span class="line">pod &apos;AFNetworking&apos;</span><br></pre></td></tr></table></figure>
<p>在终端中输入pod install 命令，会看到到同目录下面创建了一个xcworkspace的工程。</p>
<h3 id="创建私有Spec-Repo"><a href="#创建私有Spec-Repo" class="headerlink" title="创建私有Spec Repo"></a>创建私有Spec Repo</h3><p>看了官方的Spec Repo后，我们需要创建一个类似的<code>~/.cocoapods/repos</code>的master的Spec Repo文件，这里我们可以fork官方，也可以自己创建。建议自己创建比较好，由于官方的东西实在是太多。执行后会生成TwwSpecs.podspec文件，需要在自己的github上创建一个repositories。然后修改项目文件TwwSpecs.podspec内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod repo add TwwSpecs https://github.com/Tweiwei497435786/TwwSpecs.git</span><br></pre></td></tr></table></figure>
<p>创建成功后你会看到在<code>~/.cocoapods/repos</code>目录生成了一个<code>TwwSpecs</code>文件夹，那么这个就是我们私有的Spec Repo文件了。需要注意的就是如果项目中有其他同事共同开发的话，你还要给他这个Git仓库的权限。</p>
<h3 id="创建pod库"><a href="#创建pod库" class="headerlink" title="创建pod库"></a>创建pod库</h3><p>创建pod库参考<a href="http://tweiwei497435786.github.io/2016/03/24/创建私有pod库/" target="_blank" rel="external">创建私有pod库</a>。创建私有pod库成功后，会看到如下的目录内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">tree TwwTest -L 2</span><br><span class="line">TwwTest</span><br><span class="line">├── Example</span><br><span class="line">│   ├── Podfile</span><br><span class="line">│   ├── Podfile.lock</span><br><span class="line">│   ├── Pods</span><br><span class="line">│   ├── Tests</span><br><span class="line">│   ├── TwwTest</span><br><span class="line">│   ├── TwwTest.xcodeproj</span><br><span class="line">│   └── TwwTest.xcworkspace</span><br><span class="line">├── LICENSE</span><br><span class="line">├── README.md</span><br><span class="line">├── TwwTest</span><br><span class="line">│   ├── Assets</span><br><span class="line">│   └── Classes</span><br><span class="line">├── TwwTest.podspec</span><br><span class="line">└── _Pods.xcodeproj -&gt; Example/Pods/Pods.xcodeproj</span><br></pre></td></tr></table></figure>
<p>需要注意的是我们需要修改TwwTest.podspec文件的相关内容最低版本，包括真实的目录路径。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">s.version          = &apos;0.1.0&apos;</span><br><span class="line">s.ios.deployment_target = &apos;8.0&apos;</span><br><span class="line">s.homepage         = &apos;https://github.com/&lt;GITHUB_USERNAME&gt;/TwwTest&apos;</span><br><span class="line">s.source           = &#123; :git =&gt; &apos;https://github.com/&lt;GITHUB_USERNAME&gt;/TwwTest.git&apos;, :tag =&gt; s.version.to_s &#125;</span><br><span class="line">.....</span><br></pre></td></tr></table></figure>
<p>关于TwwTest.podspec各项表示的意思，参考官网内容。在这里需要<code>注意的是s.version</code>默认了版本，在此时我们需要手动创建tag：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git tag -m &quot;first add tag&quot; &quot;0.1.0&quot; //创建tag，并提交信息 </span><br><span class="line">git push --tags 	//推送tag到服务器</span><br></pre></td></tr></table></figure>
<p>操作成功后，我们需要将创建好的私有pod库提交到我们私有Spec Repo中进行管理，在terminate中输入：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod repo push TwwSpecs TwwTest.podspec --allow-warnings//将私有pod库TwwTest的TwwTest.podspec提交到私有repo中管理TwwSpecs，允许警告出现。</span><br></pre></td></tr></table></figure>
<p>经过上面的操作那么，我们就将TwwTest的pod库的0.1.0的tag放到TwwSpecs的私有repo中进行管理。</p>
<h3 id="维护私有podspec"><a href="#维护私有podspec" class="headerlink" title="维护私有podspec"></a>维护私有podspec</h3><p>需要注意的是，每次我们更改私有的pod库之后，在打上tag之前，我们需要修改私有pod库TwwTest的TwwTest.podspec文件，更改version信息版本：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s.version          = &apos;0.1.0&apos;</span><br></pre></td></tr></table></figure>
<p>同时需要为私有pod库打上tag</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git tag -m &quot;first add tag&quot; &quot;0.1.1&quot; //创建tag，并提交信息 </span><br><span class="line">git push --tags 	//推送tag到服务器</span><br></pre></td></tr></table></figure>
<p>然后需要push到specs中进行管理：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod repo push TwwSpecs TwwTest.podspec --allow-warnings//将私有pod库TwwTest的TwwTest.podspec提交到私有repo中管理TwwSpecs，允许警告出现。</span><br></pre></td></tr></table></figure>
<p>此时如果其他协同开发人员遇到，找不新的版本问题，需要其他开发人员本地操作：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod update repo</span><br></pre></td></tr></table></figure>
<h3 id="项目引用"><a href="#项目引用" class="headerlink" title="项目引用"></a>项目引用</h3><p>在我们的主要项目中的podfile文件加入以下内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">source &apos;https://github.com/Tweiwei497435786/TwwSpecs.git&apos;</span><br><span class="line">source &apos;https://github.com/CocoaPods/Specs.git&apos;</span><br><span class="line"></span><br><span class="line">target &quot;TwwTestProject&quot; do</span><br><span class="line">pod &apos;TwwTest&apos;,    &apos;~&gt; 1.0.0&apos;</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<h3 id="问题-1"><a href="#问题-1" class="headerlink" title="问题"></a>问题</h3><p>遇到pod repo布署更新的时候会遇到pod repo 不成功的情况，一般情况下会存在以下问题。</p>
<p>1.遇到警告导致repo不成功，此时我们可以使用以下–allow-warnings修饰.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod repo push TwwSpecs TwwTest.podspec --allow-warnings --verbose //允许警告，并且打印出详细的verbose信息</span><br></pre></td></tr></table></figure>
<p>2.由于使用了libiries的情况下我们需要在podspec里面添加相应的内容。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s.libraries = &quot;c++&quot;,&quot;z&quot; //表示要使用c++，libz的库</span><br></pre></td></tr></table></figure>
<p>3.出现了以下问题的时候：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">include of non-modular header inside framework module</span><br></pre></td></tr></table></figure>
<p>在repo的时候需要加上–use-libraries修饰</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod repo push TwwSpecs TwwTest.podspec --allow-warnings --use-libraries --verbose</span><br></pre></td></tr></table></figure>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p>1.<a href="http://www.cocoachina.com/ios/20150228/11206.html" target="_blank" rel="external">使用Cocoapods创建私有podspec</a></p>
<p>2.<a href="https://cocoapods.org" target="_blank" rel="external">cocoapods官网</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS开发/">iOS开发</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-国庆节杭州骑行胶东半岛计划" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/26/国庆节杭州骑行胶东半岛计划/" class="article-date">
  	<time datetime="2016-06-26T05:50:25.000Z" itemprop="datePublished">2016-06-26</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/26/国庆节杭州骑行胶东半岛计划/">国庆节杭州骑行胶东半岛计划</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<h3 id="出行概要"><a href="#出行概要" class="headerlink" title="出行概要"></a>出行概要</h3></blockquote>
<p>活动时间：2016.9.28–2016.10.7</p>
<p>活动目的：骑游，赏景</p>
<p>道路状况：平坦路面为主</p>
<p>出发时间：2016.9.27</p>
<p>回程时间：2016.10.7</p>
<p>路程：1200KM+</p>
<p>活动强度：强</p>
<p>活动费用：含路费计划1500以内</p>
<p>联系人：Tweiwei497435786[微信] </p>
<blockquote>
<h3 id="地图"><a href="#地图" class="headerlink" title="地图"></a>地图</h3></blockquote>
<p>总行者路书编号：675752</p>
<p><img src="https://raw.githubusercontent.com/Tweiwei497435786/HexoResource/master/article/lushuguoqingjiejiaodongbandao.png" alt="Markdown preferences pane"></p>
<p>分段路书编号：见下面每天行程</p>
<p><img src="https://raw.githubusercontent.com/Tweiwei497435786/HexoResource/master/article/jiaodongbandao_lushu.png" alt="Markdown preferences pane"></p>
<blockquote>
<h3 id="路线"><a href="#路线" class="headerlink" title="路线"></a>路线</h3></blockquote>
<h4 id="Day1-杭州乘坐大巴到南通南通汽车客运东站（0KM）"><a href="#Day1-杭州乘坐大巴到南通南通汽车客运东站（0KM）" class="headerlink" title="Day1 杭州乘坐大巴到南通南通汽车客运东站（0KM）"></a>Day1 杭州乘坐大巴到南通南通汽车客运东站（0KM）</h4><p><code>9.28 周三</code>16:30（杭州北站）集合出发乘坐大巴到南通，预计（晚上21:00左右达到南通，提前预定好宾馆住宿入住。</p>
<p>杭州天气：</p>
<p>南通天气：</p>
<p>说明：</p>
<p>（1）<a href="http://bus.ctrip.com/buslist.html?allianceid=30613&amp;sid=555538&amp;ouid=000401app-&amp;utm_medium=onebox&amp;utm_campaign=bus&amp;utm_source=baidu_pc&amp;&amp;isctrip=&amp;from=杭州&amp;to=南通&amp;ctm_ref=baidu_pc" target="_blank" rel="external">杭州 - 南通</a>，选择当天最晚时间点班次的汽车，汽车费用（120不包含自行车托运），汽车预计耗费4个小时。</p>
<h4 id="Day2-南通汽车客运东站－盐城（150KM）"><a href="#Day2-南通汽车客运东站－盐城（150KM）" class="headerlink" title="Day2 南通汽车客运东站－盐城（150KM）"></a>Day2 南通汽车客运东站－盐城（150KM）</h4><p><code>9.29 周四</code>6:30起床，南通汽车客运东站附近吃完早餐，预计下午6:30左右到达盐城市，选择住宾馆或者帐篷。</p>
<p>路况：S225,G228(路书编号:675795)</p>
<p>沿路风景名胜：</p>
<p>南通天气：</p>
<p>盐城天气：</p>
<p>说明：</p>
<h4 id="Day3-盐城市－连云港（160KM）"><a href="#Day3-盐城市－连云港（160KM）" class="headerlink" title="Day3 盐城市－连云港（160KM）"></a>Day3 盐城市－连云港（160KM）</h4><p><code>9：30 周五</code>6:30起床，收拾整理吃完早餐出发，预计下午7：00左右到达连云港连云区，选择在连云港港务局附近露营。</p>
<p>路况：G228(路书编号:675795)</p>
<p>沿路风景名胜：</p>
<p>盐城天气：</p>
<p>连云港天气：</p>
<p>说明：</p>
<h4 id="Day4-连云港－日照市区（170KM）"><a href="#Day4-连云港－日照市区（170KM）" class="headerlink" title="Day4 连云港－日照市区（170KM）"></a>Day4 连云港－日照市区（170KM）</h4><p><code>10.1 周六</code>6:30起床，收拾整理吃完早餐出发，预计下午7：30左右到达日照市区，选择在市区住宾馆或者海边露营。</p>
<p>路况：G228,G204,滨海沿路,碧海路(路书编号:570172)</p>
<p>沿路风景名胜：</p>
<p>连云港天气：</p>
<p>日照市天气：</p>
<p>说明：</p>
<h4 id="Day5-日照市－青岛市（135KM）"><a href="#Day5-日照市－青岛市（135KM）" class="headerlink" title="Day5 日照市－青岛市（135KM）"></a>Day5 日照市－青岛市（135KM）</h4><p><code>10.2 周日</code>6:30起床，收拾整理吃完早餐出发，预计下午4：00左右到达青岛市（崂山国家森林公园），选择在海边露营。</p>
<p>路况：G204,S293,S329,薛家岛港，S214(路书编号:570181)</p>
<p>沿路风景名胜：</p>
<p>日照市天气：</p>
<p>青岛市天气：</p>
<p>说明：路程相对较少，青岛有许多好玩的地方，可以多晚一些地方，选择海边露营。</p>
<h4 id="Day6-青岛－乳山市（140KM）"><a href="#Day6-青岛－乳山市（140KM）" class="headerlink" title="Day6 青岛－乳山市（140KM）"></a>Day6 青岛－乳山市（140KM）</h4><p><code>10.3 周一</code>6:30起床，收拾整理吃完早餐出发，预计下午5：00左右到达青岛市（崂山国家森林公园），选择住宿宾馆。</p>
<p>路况：S293,S202(路书编号:570189)</p>
<p>沿路风景名胜：</p>
<p>青岛市天气：</p>
<p>乳山市天气：</p>
<p>说明：</p>
<h4 id="Day7-乳山市－威海市（215KM）"><a href="#Day7-乳山市－威海市（215KM）" class="headerlink" title="Day7 乳山市－威海市（215KM）"></a>Day7 乳山市－威海市（215KM）</h4><p><code>10.4 周二</code>6:30起床，收拾整理吃完早餐出发，预计下午5：00左右到达青岛市（崂山国家森林公园），选择住宿宾馆。</p>
<p>路况：S293,S202(路书编号:570199)</p>
<p>沿路风景名胜：</p>
<p>乳山市天气：</p>
<p>威海市天气：</p>
<p>说明：该段路程规划的沿海骑行，可能路线是这几天中最重的路线。(该段路线较差或者沿路风景一般)可考虑走直线距离直接到达威海市。</p>
<h4 id="Day8-威海市－烟台市-蓬莱市（150KM）"><a href="#Day8-威海市－烟台市-蓬莱市（150KM）" class="headerlink" title="Day8 威海市－烟台市 - 蓬莱市（150KM）"></a>Day8 威海市－烟台市 - 蓬莱市（150KM）</h4><p><code>10.5 周三</code>6:30起床，收拾整理吃完早餐出发，预计下午6：00左右到达蓬莱市，选择露营或者住宿宾馆。</p>
<p>路况：S302,S264,G206(路书编号:570222)</p>
<p>沿路风景名胜：</p>
<p>威海市天气：</p>
<p>烟台市天气：</p>
<p>蓬莱市天气：</p>
<p>说明：</p>
<h4 id="Day9-蓬莱市－潍坊市（195KM）"><a href="#Day9-蓬莱市－潍坊市（195KM）" class="headerlink" title="Day9 蓬莱市－潍坊市（195KM）"></a>Day9 蓬莱市－潍坊市（195KM）</h4><p><code>10.6 周四</code>6:30起床，收拾整理吃完早餐出发，预计下午8：00左右到达潍坊市，选择住宿宾馆。</p>
<p>路况：G206(路书编号:570225)</p>
<p>沿路风景名胜：</p>
<p>蓬莱市天气</p>
<p>潍坊天气：</p>
<p>说明：</p>
<h4 id="Day10-潍坊市-杭州（高铁）"><a href="#Day10-潍坊市-杭州（高铁）" class="headerlink" title="Day10 潍坊市- 杭州（高铁）"></a>Day10 潍坊市- 杭州（高铁）</h4><p><code>10.7 周五</code>9:30起床，收拾整理吃完早餐出发，下午15:00到达潍坊火车站，乘坐下午15:48的高铁准备回杭州。</p>
<p>路况：</p>
<p>沿路风景名胜：</p>
<p>潍坊天气：</p>
<p>杭州天气：</p>
<p>说明：</p>
<p>（1）乘坐<a href="http://train.qunar.com/stationToStation.htm?fromStation=潍坊&amp;toStation=杭州&amp;date=2016-06-27&amp;ex_track=bd_aladin_train_p2p_title&amp;ex_track=bd_aladin_train_p2p_title" target="_blank" rel="external">G256</a>次高铁回杭州，时长6个小时左右，费用450，预计晚上21:40到达火车东站。</p>
<blockquote>
<h3 id="预计费用"><a href="#预计费用" class="headerlink" title="预计费用"></a>预计费用</h3></blockquote>
<table>
<thead>
<tr>
<th style="text-align:center">名称</th>
<th style="text-align:center">费用</th>
<th style="text-align:center">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">住宿</td>
<td style="text-align:center">4 * 80 = 320</td>
<td style="text-align:center">自带帐篷+宾馆，总共出行9天，按照一半住宿宾馆，费用80/天</td>
</tr>
<tr>
<td style="text-align:center">餐费</td>
<td style="text-align:center">9 * 50 ＝ 450</td>
<td style="text-align:center">餐费包含水</td>
</tr>
<tr>
<td style="text-align:center">自行车托运</td>
<td style="text-align:center">70 + 120 = 210</td>
<td style="text-align:center">去大巴直接随车，回程办理火车托运非随车</td>
</tr>
<tr>
<td style="text-align:center">车费</td>
<td style="text-align:center">120 + 450 = 570</td>
<td style="text-align:center">大巴，高铁</td>
</tr>
<tr>
<td style="text-align:center">其它费用</td>
<td style="text-align:center">未知</td>
<td style="text-align:center">包含个人消费等</td>
</tr>
<tr>
<td style="text-align:center">总计</td>
<td style="text-align:center">1550</td>
<td style="text-align:center">当前费用为大概统计，具体依据消费而定</td>
</tr>
</tbody>
</table>
<blockquote>
<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3></blockquote>
<p>1.由于时间关系，本计划只是大概的行程计划，本次出行时间不低于8天，后期可考虑裁剪路线或者增加出行日程，大家注意时间安排。</p>
<p>2.关于行程中的景点，天气会在出行之前不断完善，期望大家多出主意，可以尽快联系我。</p>
<p>2.期望大家能够在出游之前提出更多的建议，将会根据相关建议做出修改。让大家都能有一个开心，快乐美好的骑行游玩旅程。</p>
<p>3.戴好头盔手套与能量补给；需要带基本衣物，手电，防雨装备，防晒，基本药物等。</p>
<p>4.本次出行采取露营方式，需要自备帐篷。</p>
<p>5.本次活动强度较大骑行9天，需参与人员能够有150KM/天的骑行经验。</p>
<blockquote>
<h3 id="免责声明"><a href="#免责声明" class="headerlink" title="免责声明"></a>免责声明</h3></blockquote>
<p>1.本活动是自发的，有一定的危险性，参加者须对自己的安全负责。活动中当由于意外事故或急性疾病等不可预测因素造成身体损伤时，团队的其他成员会尽全力救助，但不承担任何法律和经济责任，望能理解。</p>
<p>2.任何参与本活动的人均视为同意此免责声明。</p>
<blockquote>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3></blockquote>
<p>1.<a href="http://bbs.biketo.com/thread-792308-1-1.html" target="_blank" rel="external">上海骑行青岛路上拍照</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/旅行计划/">旅行计划</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-房屋装修之装修步骤" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/25/房屋装修之装修步骤/" class="article-date">
  	<time datetime="2016-06-25T02:41:13.000Z" itemprop="datePublished">2016-06-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/25/房屋装修之装修步骤/">房屋装修之装修步骤</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>装修的步骤一般包含如下的基本21个步骤:</p>
<p>1.前期设计 – 2.主体拆改 – 3.水电改造 – 4.木工 – 5.贴砖 – 6.刷墙面漆 – 7.热水器安装 – 8.厨卫吊顶 – 9.橱柜安装– 10.烟机灶安装 – 11.木门安装 – 12.地板安装 – 13.铺贴壁纸 – 14. 开关插座安装 – 15.灯具安装 – 16.五金洁具安装 – 17.窗帘杆安装 – 18.拓荒保洁 – 19.家具进场 – 20.家电安装 – 21.家居配饰</p>
<p>接下来将会对21环节拆分讲解及需要注意的事项：</p>
<h4 id="一-前期设计"><a href="#一-前期设计" class="headerlink" title="一 前期设计"></a>一 前期设计</h4><p>在前期设计前，需要对房子做一个详细的测量，测量需要包括(下面是原平面图):<code>原设计图，原设计图线路图</code>，墙体厚度，原开关线路的位置等，原来门窗的宽高度，原墙面的宽高度，原开关的位置，不可动墙体部分等具体的位置坐标。</p>
<p><img src="https://raw.githubusercontent.com/Tweiwei497435786/HexoResource/master/article/fangwujiancaotuyuantu.JPG" alt="Markdown preferences pane"></p>
<p>做完以上的原设计图等内容，是方便重新设计出符合自己装修的图纸，在原来的基础上适当的改拆，进行二次设计。</p>
<p>选定装修风格，开始利用sweethome工具进行初期设计，在原设计图上改拆等具体的都要标注清楚。</p>
<p>1.设计好装修图之后，需要设计好家居的摆放位置，进行渲染后看效果图，确定好所有的家居，灯，家电,五金，等设备摆放位置后，可以根据设计图进行电路图的设计，开关位置，开关数量都需要确定（数量，坐标位置）将这些信息标注都在设计图上面标注清楚。</p>
<p>2.根据墙面等大小，摆放各种家具装置，确定大小位置高度，后期方便家具购买。（注意各家具的大小都需要具体的坐标大小)</p>
<h4 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h4><p>1.<a href="http://jingyan.baidu.com/article/7f766daf7bc9b34100e1d044.html" target="_blank" rel="external">装修房子的过程</a></p>
<p>2.<a href="http://mt.sohu.com/20150310/n409584382.shtml" target="_blank" rel="external">史上最详细的房屋装修流程，看懂了再装！不收藏可惜！！！</a></p>
<p>3.<a href="http://www.sweethome3d.com/zh-tw/userGuide.jsp" target="_blank" rel="external">Sweet Home 3D 使用者指南</a></p>
<p>4.<a href="http://www.ooopic.com" target="_blank" rel="external">昵图网素材</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/房屋装修/">房屋装修</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-读《影响力》" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/25/读《影响力》/" class="article-date">
  	<time datetime="2016-06-25T02:39:53.000Z" itemprop="datePublished">2016-06-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/25/读《影响力》/">读《影响力》</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h4><p>这本书是一本社会心理学类的书籍，作为销售人员或者管理者及其从事相关行业人员，这本书是一本难得的好书，从心理学角度如何有技巧的去说服别人。当然如果你不是以上人员也是非常有必要去读一读，书中关于使用相关心里原则如何辨别是真善还是作为获利手段都有相关方法，同时对于如果其他人对你使用相关手段获利，那么你如何防范及从心理层面拒绝都有行之有效的对策，总之这是一本难得的好书。</p>
<p>本书作者罗比特·西奥迪尼，全球最致命的说服术与影响力亚牛权威，分别于北卡罗来纳大学，哥伦比亚大学取得博士与博士后学位，投入说服与顺从行为研究多年。目前是亚利桑那州立大学心理学系教授。</p>
<p><img src="https://raw.githubusercontent.com/Tweiwei497435786/HexoResource/master/books/influence_cover.jpg" alt="Markdown preferences pane"></p>
<h4 id="知识框架"><a href="#知识框架" class="headerlink" title="知识框架"></a>知识框架</h4><p>本书内容围绕六大原则展开，分别是<code>互惠</code>,<code>承诺一致</code>,<code>社会认同</code>,<code>喜好</code>,<code>权威</code>,<code>稀缺</code>的社会功能来讨论，以及顺从专家如何将各项原则整合到购买，捐赠，让步，选举，赞成等请求中，使之发挥巨大的力量。本书的首页便有一张类似xmind的思维导图，非常方便读者能够快速的掌握书中的知识结构。</p>
<p><img src="https://raw.githubusercontent.com/Tweiwei497435786/HexoResource/master/books/influence.jpg" alt="Markdown preferences pane"></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/读书屋/">读书屋</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-iOS多线程理解之NSOperation" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/06/23/iOS多线程理解之NSOperation/" class="article-date">
  	<time datetime="2016-06-23T13:03:29.000Z" itemprop="datePublished">2016-06-23</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/06/23/iOS多线程理解之NSOperation/">iOS多线程理解之NSOperation</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>上一节有讲到过关于NSThread的方式实现多线程，本章将会采用NSOperation实现多线程。使用NSOperation去操作，相对较为简单，只需要将NSOperation放到NSOperationQueue这个队列中，线程就会依次的启动，NSOperationQueue负责管理，执行所有的NSOperation，可以更加方便容易的管理线程总的数量和线程之间的优先级关系。有效的解决NSThread中存在的问题。</p>
<p>在NSOperation中有两个常用子类用于创建线程的操作：</p>
<ul>
<li>NSInvocationOperation</li>
<li>NSBlockOperation(block形式组织代码)</li>
</ul>
<h4 id="NSOperation"><a href="#NSOperation" class="headerlink" title="NSOperation"></a>NSOperation</h4><p>可以将其看做线程管理器，对线程进行管理操作。下面看一下其属性和方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- (void)addOperation:(NSOperation *)op;//将创建的Operation放入操作队列，`添加到操作队列后，队列会开启一个新的线程执行此操作`</span><br><span class="line">- (void)addOperationWithBlock:(void (^)(void))block NS_AVAILABLE(10_6, 4_0);//采用block的形式加入操作队列</span><br><span class="line">@property NSInteger maxConcurrentOperationCount;////限制队列同时只运行线程的最大数量</span><br><span class="line">- (void)cancelAllOperations;//取消当前队列的所有操作</span><br><span class="line">.....</span><br></pre></td></tr></table></figure>
<h4 id="NSInvocationOperation"><a href="#NSInvocationOperation" class="headerlink" title="NSInvocationOperation"></a>NSInvocationOperation</h4><p>相对于使用NSThread代码减少，不需要管理其线程。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">NSInvocationOperation *invocationOperation = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(loadImage:) object:model];</span><br><span class="line">//创建完NSInvocationOperation对象并不会调用，它由一个start方法启动操作，但是注意如果直接调用start方法，则此操作会在主线程中调用，一般不会这么操作,而是添加到NSOperationQueue中</span><br><span class="line">//[invocationOperation start];</span><br><span class="line">[self.operationQueue addOperation:invocationOperation];//注意添加到操作队后，队列会开启一个线程执行此操作</span><br></pre></td></tr></table></figure>
<h4 id="NSBlockOperation"><a href="#NSBlockOperation" class="headerlink" title="NSBlockOperation"></a>NSBlockOperation</h4><p>相对于NSInvocationOperation使用更加简单，直接使用block块。可以不必单独定义新的方法，直接在block中写代码即可。可以避免参数传递限制的问题。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">NSBlockOperation *blockOperation = [NSBlockOperation blockOperationWithBlock:^&#123;//简洁，避免传递参数的问题</span><br><span class="line">   [self loadImage:model];</span><br><span class="line">&#125;];</span><br><span class="line">[self.operationQueue addOperation:blockOperation];</span><br></pre></td></tr></table></figure>
<h5 id="使用NSOperation进行多线程开发可以设置最大并发线程，有效的对线程进行了控制。"><a href="#使用NSOperation进行多线程开发可以设置最大并发线程，有效的对线程进行了控制。" class="headerlink" title="使用NSOperation进行多线程开发可以设置最大并发线程，有效的对线程进行了控制。"></a><code>使用NSOperation进行多线程开发可以设置最大并发线程，有效的对线程进行了控制。</code></h5><h4 id="线程执行顺序"><a href="#线程执行顺序" class="headerlink" title="线程执行顺序"></a>线程执行顺序</h4><p>在之前使用NSThread很难控制线程的执行顺序，但是在NSOperation中就相对比较容易控制，每一个NSOperation可以设置依赖线程，NSOperation提供了addDependency方法可以有效的控制当前queue中的线程之间的依赖关系。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//创建多个线程用于填充图片</span><br><span class="line">for (int i=0; i&lt;count-1; ++i) &#123;</span><br><span class="line">   //方法1：创建操作块添加到队列</span><br><span class="line">   //创建多线程操作</span><br><span class="line">   NSBlockOperation *blockOperation=[NSBlockOperation blockOperationWithBlock:^&#123;</span><br><span class="line">       [self loadImage:[NSNumber numberWithInt:i]];</span><br><span class="line">   &#125;];</span><br><span class="line">   //设置依赖操作为最后一张图片加载操作</span><br><span class="line">   [blockOperation addDependency:lastBlockOperation];</span><br><span class="line">   </span><br><span class="line">   [operationQueue addOperation:blockOperation];</span><br><span class="line">   </span><br><span class="line">&#125;</span><br><span class="line">//将最后一个图片的加载操作加入线程队列</span><br><span class="line">[operationQueue addOperation:lastBlockOperation];</span><br></pre></td></tr></table></figure>
<p>需要注意的是不可以设置为<code>循环依赖</code>，否则不会被执行。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS技术/">iOS技术</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 Tortoise
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>